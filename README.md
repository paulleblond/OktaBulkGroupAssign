# OktaBulkGroupAssign

This is a command line tool that I've written to support some bulk user operations that I've needed for things I've done at work.  Currently it supports doing user group assignments from CSV and importing users from CSV.

## Bulk Group Assign
This action allows you to assign users to okta groups based on a 2 column CSV of login and group name.  For group names that have spaces, surround the group name with double quotes.  **Do not include a header** in your group assignment CSV.  The only group type that can be assigned to is **OKTA_GROUP**.  Active Directory or other mastered groups cannot be changed via Okta's API.  Below is an example of how the CSV should be formatted.

    user@domain.dev,group1
    otheruser@domain.dev,"group two"
    admin@domain.dev,group1

## Import Users
This action allows you to upload users with their associated metadata in either an activated (email sent out) or staged state.  The built-in CSV user import has caused me issues with users being able to authenticate, so I added this functionality as a workaround that doesn't cause the user corruption that the built-in CSV import does.

To create the CSV, have an admin go to Users->People, More Actions, Import Users from CSV.  Then click the "this template" link.  This will ensure the CSV will have properly named headers for your custom User Profile.  Note that complex (arrays, picklists, etc) custom profile fields will probably not load correctly.  Strings, Numbers, Boolean should work just fine.

## Parameters

    OktaBulkGroupAssign <action> -t mytenant.okta.com -k 30320fds89f9w0f890sf80s -a -v -i C:\Okta\Import.csv

- Action (required)
  - Can be "import" or "assign", depending on what action you're taking
- Tenant (-t, required)
  - The domain of your tenant, without any HTTP decorations.  Be aware that your admin page changes the domain to include a "-admin" which will not work.  (ie: mytenant-admin.okta.com)
- Key (-k, required)
  - The API Token used to make the API calls.  This can be generated by an administrator going to API->Tokens within Okta.
- ImportPath (-i, required)
  - The path to the CSV with user or group assignment information.
- Activate (-a, optional)
  - This option only applies to the import action.  Setting this will cause users to be activated when they are created.  If this is not set, users will be staged.
- Verbose (-v, optional)
  - This option will include additional data that is really only useful if something is going wrong and you need further insight into what's going on.

If a required parameter is missing, you will be prompted for it.  So if you want to be walked through the steps of activating a set of users you can just type

    OktaBulkGroupAssign -a
and you will be prompted for each of the required parameters.  The optional parameters must be set at the command line.